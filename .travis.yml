os: linux
language: c
compiler: 
env:
  global:
    - RUN_TESTS=false
    - CCACHE_TEMPDIR=/tmp/.ccache-temp
    - BASE_OUTDIR=$TRAVIS_BUILD_DIR/out
deploy:
  skip_cleanup: true
git:
  depth: 3
addons:
  packages:
  - gcc-4.9
before_install:
 - chmod +x build.sh
 - sudo apt-get install gcc-6
 - sudo ln -s /bin/gcc-6 /bin/gcc
 - git clone --depth=2 https://android.googlesource.com/platform/prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.9/ -b marshmallow-dev
script:
- ./build.sh 
after_success:
- cp arch/arm64/boot/{Image,Image.gz,Image.gz-dtb} .
- cp drivers/staging/prima/wlan.ko .
- LOCAL_DIR=`pwd`
- export PATH=$PATH:$LOCAL_DIR/aarch64-linux-android-4.9/bin
- aarch64-linux-android-strip -g wlan.ko
- ls Image
- ls Image.gz-dtb
- ls wlan.ko
- curl -T "{Image,Image.gz,Image.gz-dtb,wlan.ko}" -u releases@travisci-98678.cu.cc:public123 ftp://travisci-98678.cu.cc/
